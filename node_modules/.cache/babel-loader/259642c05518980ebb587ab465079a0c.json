{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Rerousel = void 0;\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar typestyle_1 = require(\"typestyle\");\n\nvar wrapper = typestyle_1.style({\n  display: 'flex',\n  alignItems: 'center',\n  overflowX: 'scroll',\n  height: '100%',\n  scrollSnapType: 'x mandatory',\n  '-webkit-overflow-scrolling': 'touch',\n  flexFlow: 'row nowrap',\n  '-ms-overflow-style': 'none',\n  scrollbarWidth: 'none',\n  $nest: {\n    '& > *': {\n      boxSizing: 'border-box',\n      flexShrink: 0\n    },\n    '&::-webkit-scrollbar': {\n      display: 'none'\n    }\n  }\n});\n\nvar Rerousel = function (_a) {\n  var children = _a.children,\n      itemRef = _a.itemRef,\n      _b = _a.interval,\n      interval = _b === void 0 ? 3000 : _b,\n      _c = _a.stop,\n      stop = _c === void 0 ? false : _c;\n  var itemWidth = useWidth(itemRef)[0];\n\n  var _d = react_1.useState(),\n      setScrollInterval = _d[1];\n\n  var _e = react_1.useState(0),\n      currentScrollLeft = _e[0],\n      setCurrentScrollLeft = _e[1];\n\n  var wrapperRef = react_1.useRef(null);\n  var cc = react_1.Children.count(children);\n\n  function useWidth(elementRef) {\n    var _a = react_1.useState(0),\n        width = _a[0],\n        setWidth = _a[1];\n\n    var updateWidth = react_1.useCallback(function () {\n      if (elementRef && elementRef.current) {\n        var width_1 = elementRef.current.getBoundingClientRect().width;\n        setWidth(width_1);\n      }\n    }, [elementRef]);\n    var firstUpdateWidth = react_1.useCallback(function () {\n      if (elementRef && elementRef.current) {\n        var width_2 = elementRef.current.getBoundingClientRect().width;\n        width_2 = width_2 - parseInt(window.getComputedStyle(elementRef.current).getPropertyValue('border-left-width')) - parseInt(window.getComputedStyle(elementRef.current).getPropertyValue('border-right-width'));\n        width_2 = width_2 - parseInt(window.getComputedStyle(elementRef.current).getPropertyValue('padding-left')) - parseInt(window.getComputedStyle(elementRef.current).getPropertyValue('padding-right'));\n        setWidth(width_2);\n      }\n    }, [elementRef]);\n    react_1.useEffect(function () {\n      firstUpdateWidth();\n      window.addEventListener('resize', updateWidth);\n      return function () {\n        window.removeEventListener('resize', updateWidth);\n      };\n    }, [updateWidth]);\n    return [width];\n  }\n\n  react_1.useEffect(function () {\n    var _a, _b;\n\n    if (currentScrollLeft === 0) {\n      (_a = wrapperRef.current) === null || _a === void 0 ? void 0 : _a.scrollTo({\n        left: 0\n      });\n      setCurrentScrollLeft(1);\n      return;\n    }\n\n    if (currentScrollLeft > cc) {\n      setCurrentScrollLeft(0);\n      return;\n    }\n\n    if (itemWidth != undefined) {\n      (_b = wrapperRef.current) === null || _b === void 0 ? void 0 : _b.scrollTo({\n        left: itemWidth * currentScrollLeft,\n        behavior: 'smooth'\n      });\n    }\n  }, [currentScrollLeft, itemWidth]);\n  react_1.useEffect(function () {\n    if (!stop) {\n      var i = setInterval(function () {\n        setCurrentScrollLeft(function (csl) {\n          return csl + 1;\n        });\n      }, interval);\n      setScrollInterval(i);\n    }\n\n    return function () {\n      setScrollInterval(function (i) {\n        if (i) {\n          clearInterval(i);\n        }\n\n        return undefined;\n      });\n    };\n  }, [itemWidth, interval, stop]);\n  return react_1.default.createElement(\"div\", {\n    className: wrapper,\n    ref: wrapperRef\n  }, children, children);\n};\n\nexports.Rerousel = Rerousel;","map":{"version":3,"sources":["../src/index.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Rerousel = void 0;\nvar react_1 = __importStar(require(\"react\"));\nvar typestyle_1 = require(\"typestyle\");\nvar wrapper = typestyle_1.style({\n    display: 'flex',\n    alignItems: 'center',\n    overflowX: 'scroll',\n    height: '100%',\n    scrollSnapType: 'x mandatory',\n    '-webkit-overflow-scrolling': 'touch',\n    flexFlow: 'row nowrap',\n    '-ms-overflow-style': 'none',\n    scrollbarWidth: 'none',\n    $nest: {\n        '& > *': {\n            boxSizing: 'border-box',\n            flexShrink: 0,\n        },\n        '&::-webkit-scrollbar': {\n            display: 'none',\n        },\n    },\n});\nvar Rerousel = function (_a) {\n    var children = _a.children, itemRef = _a.itemRef, _b = _a.interval, interval = _b === void 0 ? 3000 : _b, _c = _a.stop, stop = _c === void 0 ? false : _c;\n    var itemWidth = useWidth(itemRef)[0];\n    var _d = react_1.useState(), setScrollInterval = _d[1];\n    var _e = react_1.useState(0), currentScrollLeft = _e[0], setCurrentScrollLeft = _e[1];\n    var wrapperRef = react_1.useRef(null);\n    var cc = react_1.Children.count(children);\n    function useWidth(elementRef) {\n        var _a = react_1.useState(0), width = _a[0], setWidth = _a[1];\n        var updateWidth = react_1.useCallback(function () {\n            if (elementRef && elementRef.current) {\n                var width_1 = elementRef.current.getBoundingClientRect().width;\n                setWidth(width_1);\n            }\n        }, [elementRef]);\n        var firstUpdateWidth = react_1.useCallback(function () {\n            if (elementRef && elementRef.current) {\n                var width_2 = elementRef.current.getBoundingClientRect().width;\n                width_2 =\n                    width_2 -\n                        parseInt(window.getComputedStyle(elementRef.current).getPropertyValue('border-left-width')) -\n                        parseInt(window.getComputedStyle(elementRef.current).getPropertyValue('border-right-width'));\n                width_2 =\n                    width_2 -\n                        parseInt(window.getComputedStyle(elementRef.current).getPropertyValue('padding-left')) -\n                        parseInt(window.getComputedStyle(elementRef.current).getPropertyValue('padding-right'));\n                setWidth(width_2);\n            }\n        }, [elementRef]);\n        react_1.useEffect(function () {\n            firstUpdateWidth();\n            window.addEventListener('resize', updateWidth);\n            return function () {\n                window.removeEventListener('resize', updateWidth);\n            };\n        }, [updateWidth]);\n        return [width];\n    }\n    react_1.useEffect(function () {\n        var _a, _b;\n        if (currentScrollLeft === 0) {\n            (_a = wrapperRef.current) === null || _a === void 0 ? void 0 : _a.scrollTo({ left: 0 });\n            setCurrentScrollLeft(1);\n            return;\n        }\n        if (currentScrollLeft > cc) {\n            setCurrentScrollLeft(0);\n            return;\n        }\n        if (itemWidth != undefined) {\n            (_b = wrapperRef.current) === null || _b === void 0 ? void 0 : _b.scrollTo({\n                left: itemWidth * currentScrollLeft,\n                behavior: 'smooth',\n            });\n        }\n    }, [currentScrollLeft, itemWidth]);\n    react_1.useEffect(function () {\n        if (!stop) {\n            var i = setInterval(function () {\n                setCurrentScrollLeft(function (csl) { return csl + 1; });\n            }, interval);\n            setScrollInterval(i);\n        }\n        return function () {\n            setScrollInterval(function (i) {\n                if (i) {\n                    clearInterval(i);\n                }\n                return undefined;\n            });\n        };\n    }, [itemWidth, interval, stop]);\n    return (react_1.default.createElement(\"div\", { className: wrapper, ref: wrapperRef },\n        children,\n        children));\n};\nexports.Rerousel = Rerousel;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}